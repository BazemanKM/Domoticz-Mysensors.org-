return {
            on =    { 
                        timer = { 'at 23:59' },
                    },
 
            logging =    {   
                        level   =   domoticz.LOG_DEBUG, -- set to error when all OK
                        marker  =   "Meterstanden naar Greenchoice " .. ScriptVersion },    
 
    execute = function(dz)
 
    local verbruikdal = dz.utils.round(dz.devices('Verbruik daltarief').counter,0)
    local verbruiknormaal = dz.utils.round(dz.devices('Verbruik normaaltarief').counter,0) 
    local terugdal = dz.utils.round(dz.devices('Teruglevering daltarief').counter,0) 
    local terugnormaal = dz.utils.round(dz.devices('Teruglevering normaaltarief').counter,0)

    curl https://app.greenchoice.nl/token -X POST -H "Content-Type: application/x-www-form-urlencoded" --data-urlencode "grant_type=password" --data-urlencode "client_id=MobileApp" --data-urlencode "client_secret=A6E60EBF73521F57" --data-urlencode "username=********" --data-urlencode "password=********"



return 
{
    on = 
    { 
        timer           = {'at 00:05'},
        httpResponses   =   { mycallbackstring }, 
    },

    logging = { 
        level = domoticz.LOG_ERROR, 
        marker = 'Greenchoice' 
    },

    execute = function(dz, item)
        
        local function pushData(volume, pushDate)
            dz.openURL(
            {
                url = 'https://www.mindergas.nl/api/gas_meter_readings',
                method = 'POST',
                headers = {
                    ['AUTH-TOKEN'] = 'XXXXXXXXXX',
                    ['Content-Type'] = 'application/json',
                },
                callback = 'mycallbackstring',
                postData = 
                {
                    ['date'] = pushDate,
                    ['reading'] = volume,
                }
            })
        end

        if item.isHTTPResponse then
            dz.log('Response from MinderGas: ' .. item.statusCode)
        else 
            
            local wpkWh = dz.devices(38).WhTotal -- Device IDX van je kWh meter!
            
            local volume = math.abs(dz.utils.round( (wpkWh/1000/8.8), 2))
            
            local yesterday = os.time() - 86400
            local pushDate = os.date("%Y-%m-%d", yesterday)
            
            pushData(volume, pushDate) 
        end
   end
}
